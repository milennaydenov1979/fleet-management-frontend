<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management Pro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f35 100%);
            color: #fff;
            min-height: 100vh;
        }
        .nav {
            background: linear-gradient(135deg, #1a1f35 0%, #252b42 100%);
            border-bottom: 1px solid #334155;
            padding: 1rem 2rem;
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        .nav-logo {
            font-size: 1.3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-right: 1rem;
        }
        .nav-tab {
            padding: 0.6rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            border: 1px solid transparent;
        }
        .nav-tab:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: #3b82f6;
        }
        .nav-tab.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-color: #3b82f6;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .page { display: none; }
        .page.active { display: block; }
        h1 { font-size: 2rem; margin-bottom: 2rem; }
        .loading { text-align: center; padding: 3rem; }
    </style>
</head>
<body>
    <div class="nav">
        <div class="nav-logo">üöõ Fleet Pro</div>
        <div class="nav-tab active" onclick="switchPage('vehicles')">üöõ –ú–∞—à–∏–Ω–∏</div>
        <div class="nav-tab" onclick="switchPage('drivers')">üë®‚Äç‚úàÔ∏è –í–æ–¥–∞—á–∏</div>
        <div class="nav-tab" onclick="switchPage('assignments')">üîó –ù–∞–∑–Ω–∞—á–µ–Ω–∏—è</div>
        <div class="nav-tab" onclick="switchPage('trips')">üìç –ö—É—Ä—Å–æ–≤–µ</div>
    </div>

    <div class="container">
        <div id="vehicles-page" class="page active">
            <h1>–ú–∞—à–∏–Ω–∏</h1>
            <div id="vehiclesTable" class="loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</div>
        </div>
        <div id="drivers-page" class="page">
            <h1>–í–æ–¥–∞—á–∏</h1>
            <div id="driversTable" class="loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</div>
        </div>
        <div id="assignments-page" class="page">
            <h1>–ù–∞–∑–Ω–∞—á–µ–Ω–∏—è</h1>
            <div id="assignmentsTable" class="loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</div>
        </div>
        <div id="trips-page" class="page">
            <h1>–ö—É—Ä—Å–æ–≤–µ</h1>
            <div id="tripsTable" class="loading">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</div>
        </div>
    </div>

    <script>
        var API_URL = 'https://fleet-management-backend-cwg4.onrender.com';

        function switchPage(page) {
            var pages = document.querySelectorAll('.page');
            var tabs = document.querySelectorAll('.nav-tab');
            for (var i = 0; i < pages.length; i++) pages[i].classList.remove('active');
            for (var i = 0; i < tabs.length; i++) tabs[i].classList.remove('active');
            
            if (page === 'vehicles') {
                document.getElementById('vehicles-page').classList.add('active');
                tabs[0].classList.add('active');
                loadVehicles();
            } else if (page === 'drivers') {
                document.getElementById('drivers-page').classList.add('active');
                tabs[1].classList.add('active');
                loadDrivers();
            } else if (page === 'assignments') {
                document.getElementById('assignments-page').classList.add('active');
                tabs[2].classList.add('active');
                loadAssignments();
            } else if (page === 'trips') {
                document.getElementById('trips-page').classList.add('active');
                tabs[3].classList.add('active');
                loadTrips();
            }
        }

        function loadVehicles() {
            fetch(API_URL + '/api/vehicles')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.success) {
                        var html = '<table><tr><th>ID</th><th>–ù–æ–º–µ—Ä</th><th>–ú–∞—Ä–∫–∞</th></tr>';
                        for (var i = 0; i < data.data.length; i++) {
                            var v = data.data[i];
                            html += '<tr><td>#' + v.id + '</td><td>' + (v.reg_number || 'N/A') + '</td><td>' + v.brand + '</td></tr>';
                        }
                        html += '</table>';
                        document.getElementById('vehiclesTable').innerHTML = html;
                    }
                });
        }

        function loadDrivers() {
            fetch(API_URL + '/api/drivers')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.success) {
                        var html = '<table><tr><th>ID</th><th>–ò–º–µ</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th></tr>';
                        for (var i = 0; i < data.data.length; i++) {
                            var d = data.data[i];
                            html += '<tr><td>#' + d.id + '</td><td>' + d.name + '</td><td>' + (d.phone || '-') + '</td></tr>';
                        }
                        html += '</table>';
                        document.getElementById('driversTable').innerHTML = html;
                    }
                });
        }

        function loadAssignments() {
            fetch(API_URL + '/api/assignments')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.success) {
                        var html = '<table><tr><th>ID</th><th>–ú–∞—à–∏–Ω–∞</th><th>–í–æ–¥–∞—á</th></tr>';
                        for (var i = 0; i < data.data.length; i++) {
                            var a = data.data[i];
                            html += '<tr><td>#' + a.id + '</td><td>' + (a.vehicle_reg_number || 'N/A') + '</td><td>' + (a.driver_name || 'N/A') + '</td></tr>';
                        }
                        html += '</table>';
                        document.getElementById('assignmentsTable').innerHTML = html;
                    }
                });
        }

        function loadTrips() {
            fetch(API_URL + '/api/trips')
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.success) {
                        var html = '<table><tr><th>ID</th><th>–ú–∞—à–∏–Ω–∞</th><th>–ú–∞—Ä—à—Ä—É—Ç</th><th>–°—Ç–∞—Ç—É—Å</th></tr>';
                        for (var i = 0; i < data.data.length; i++) {
                            var t = data.data[i];
                            html += '<tr><td>#' + t.id + '</td><td>' + (t.vehicle_reg_number || 'N/A') + '</td><td>' + (t.route || '-') + '</td><td>' + t.status + '</td></tr>';
                        }
                        html += '</table>';
                        document.getElementById('tripsTable').innerHTML = html;
                    }
                });
        }

        loadVehicles();
    </script>
</body>
</html>
